"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[14],{3939:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(8225);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}},6116:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"self-hosting/docker-setup","title":"Docker Setup","description":"Deploy Hive-Pal using Docker for the simplest installation.","source":"@site/docs/self-hosting/docker-setup.md","sourceDirName":"self-hosting","slug":"/self-hosting/docker-setup","permalink":"/docs/self-hosting/docker-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/martinhrvn/hive-pal/tree/main/docs/docs/self-hosting/docker-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Docker Setup"},"sidebar":"tutorialSidebar","previous":{"title":"System Requirements","permalink":"/docs/self-hosting/requirements"},"next":{"title":"Manual Installation","permalink":"/docs/self-hosting/manual-setup"}}');var l=s(7557),r=s(3939);const t={sidebar_position:2,title:"Docker Setup"},o="Docker Setup",c={},a=[{value:"Quick Start",id:"quick-start",level:2},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"Backend (.env)",id:"backend-env",level:3},{value:"Frontend (.env)",id:"frontend-env",level:3},{value:"Docker Compose Structure",id:"docker-compose-structure",level:2},{value:"Services",id:"services",level:3},{value:"Volumes",id:"volumes",level:3},{value:"Networks",id:"networks",level:3},{value:"Production Deployment",id:"production-deployment",level:2},{value:"SSL Setup",id:"ssl-setup",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Logs",id:"logs",level:3},{value:"Backup Strategy",id:"backup-strategy",level:2},{value:"Database Backups",id:"database-backups",level:3},{value:"File Backups",id:"file-backups",level:3},{value:"Updates",id:"updates",level:2},{value:"Application Updates",id:"application-updates",level:3},{value:"Database Migrations",id:"database-migrations",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Commands",id:"debug-commands",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"docker-setup",children:"Docker Setup"})}),"\n",(0,l.jsx)(n.p,{children:"Deploy Hive-Pal using Docker for the simplest installation."}),"\n",(0,l.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Clone repository\ngit clone https://github.com/martinhrvn/hive-pal.git\ncd hive-pal\n\n# Copy environment files\ncp apps/backend/.env.example apps/backend/.env\ncp apps/frontend/.env.example apps/frontend/.env\n\n# Start services\ndocker-compose up -d\n"})}),"\n",(0,l.jsx)(n.h2,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"backend-env",children:"Backend (.env)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Database\nDATABASE_URL="postgresql://postgres:password@postgres:5432/hivepal"\n\n# Security\nJWT_SECRET=your_jwt_secret_here\nALLOWED_ORIGINS=http://localhost:5173,https://yourdomain.com\n\n# Optional services\nSENTRY_DSN=your_sentry_dsn\nSMTP_HOST=your_smtp_server\n'})}),"\n",(0,l.jsx)(n.h3,{id:"frontend-env",children:"Frontend (.env)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# API connection\nVITE_API_URL=http://localhost:3000\n\n# Optional\nVITE_SENTRY_DSN=your_sentry_dsn\n"})}),"\n",(0,l.jsx)(n.h2,{id:"docker-compose-structure",children:"Docker Compose Structure"}),"\n",(0,l.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"frontend"}),": React application"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"backend"}),": NestJS API"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"postgres"}),": PostgreSQL database"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"redis"}),": Caching (optional)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"volumes",children:"Volumes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Database persistence"}),"\n",(0,l.jsx)(n.li,{children:"File uploads"}),"\n",(0,l.jsx)(n.li,{children:"Configuration files"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"networks",children:"Networks"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Internal communication"}),"\n",(0,l.jsx)(n.li,{children:"External access"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"production-deployment",children:"Production Deployment"}),"\n",(0,l.jsx)(n.h3,{id:"ssl-setup",children:"SSL Setup"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'services:\n  nginx:\n    image: nginx:alpine\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./ssl:/etc/ssl/certs\n'})}),"\n",(0,l.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use Docker secrets"}),"\n",(0,l.jsx)(n.li,{children:"External configuration"}),"\n",(0,l.jsx)(n.li,{children:"Environment-specific settings"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,l.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"API health endpoint"}),"\n",(0,l.jsx)(n.li,{children:"Database connectivity"}),"\n",(0,l.jsx)(n.li,{children:"Service status"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"logs",children:"Logs"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Centralized logging"}),"\n",(0,l.jsx)(n.li,{children:"Log rotation"}),"\n",(0,l.jsx)(n.li,{children:"Error tracking"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"backup-strategy",children:"Backup Strategy"}),"\n",(0,l.jsx)(n.h3,{id:"database-backups",children:"Database Backups"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Automated backup\ndocker-compose exec postgres pg_dump -U postgres hivepal > backup.sql\n"})}),"\n",(0,l.jsx)(n.h3,{id:"file-backups",children:"File Backups"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Upload directories"}),"\n",(0,l.jsx)(n.li,{children:"Configuration files"}),"\n",(0,l.jsx)(n.li,{children:"SSL certificates"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"updates",children:"Updates"}),"\n",(0,l.jsx)(n.h3,{id:"application-updates",children:"Application Updates"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Pull latest changes\ngit pull origin main\n\n# Rebuild containers\ndocker-compose build --no-cache\n\n# Update services\ndocker-compose up -d\n"})}),"\n",(0,l.jsx)(n.h3,{id:"database-migrations",children:"Database Migrations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Automatic on startup"}),"\n",(0,l.jsx)(n.li,{children:"Manual migration commands"}),"\n",(0,l.jsx)(n.li,{children:"Backup before updates"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Port conflicts"}),"\n",(0,l.jsx)(n.li,{children:"Permission problems"}),"\n",(0,l.jsx)(n.li,{children:"Database connection errors"}),"\n",(0,l.jsx)(n.li,{children:"Memory issues"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"debug-commands",children:"Debug Commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# View logs\ndocker-compose logs -f service_name\n\n# Execute commands\ndocker-compose exec backend npm run migrate\n\n# Restart services\ndocker-compose restart\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);