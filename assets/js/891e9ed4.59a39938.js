"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[258],{3939:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var l=i(8225);const s={},t=l.createContext(s);function a(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(t.Provider,{value:n},e.children)}},5804:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"self-hosting/monitoring","title":"Monitoring","description":"Monitor your Hive-Pal installation with comprehensive logging and metrics.","source":"@site/docs/self-hosting/monitoring.md","sourceDirName":"self-hosting","slug":"/self-hosting/monitoring","permalink":"/docs/self-hosting/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/martinhrvn/hive-pal/tree/main/docs/docs/self-hosting/monitoring.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Monitoring"},"sidebar":"tutorialSidebar","previous":{"title":"Backup & Restore","permalink":"/docs/self-hosting/backup-restore"},"next":{"title":"Troubleshooting","permalink":"/docs/troubleshooting"}}');var s=i(7557),t=i(3939);const a={sidebar_position:6,title:"Monitoring"},r="Monitoring",o={},c=[{value:"Health Monitoring",id:"health-monitoring",level:2},{value:"Application Health",id:"application-health",level:3},{value:"Database Health",id:"database-health",level:3},{value:"Logging",id:"logging",level:2},{value:"Application Logs",id:"application-logs",level:3},{value:"Log Aggregation",id:"log-aggregation",level:3},{value:"Metrics Collection",id:"metrics-collection",level:2},{value:"Prometheus Integration",id:"prometheus-integration",level:3},{value:"Key Metrics",id:"key-metrics",level:3},{value:"Grafana Dashboards",id:"grafana-dashboards",level:2},{value:"System Metrics",id:"system-metrics",level:3},{value:"Application Metrics",id:"application-metrics",level:3},{value:"Business Metrics",id:"business-metrics",level:3},{value:"Alerting",id:"alerting",level:2},{value:"Alert Rules",id:"alert-rules",level:3},{value:"Notification Channels",id:"notification-channels",level:3},{value:"Log Management",id:"log-management",level:2},{value:"Log Rotation",id:"log-rotation",level:3},{value:"Centralized Logging",id:"centralized-logging",level:3},{value:"Performance Monitoring",id:"performance-monitoring",level:2},{value:"Database Performance",id:"database-performance",level:3},{value:"Application Performance",id:"application-performance",level:3},{value:"Security Monitoring",id:"security-monitoring",level:2},{value:"Access Logs",id:"access-logs",level:3},{value:"Security Alerts",id:"security-alerts",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Tools",id:"debug-tools",level:3},{value:"Monitoring Best Practices",id:"monitoring-best-practices",level:2},{value:"Metrics Strategy",id:"metrics-strategy",level:3},{value:"Log Management",id:"log-management-1",level:3},{value:"Performance Tuning",id:"performance-tuning",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"monitoring",children:"Monitoring"})}),"\n",(0,s.jsx)(n.p,{children:"Monitor your Hive-Pal installation with comprehensive logging and metrics."}),"\n",(0,s.jsx)(n.h2,{id:"health-monitoring",children:"Health Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"application-health",children:"Application Health"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Health check endpoint\ncurl http://localhost:3000/health\n\n# Response format\n{\n  "status": "ok",\n  "timestamp": "2024-01-01T00:00:00Z",\n  "uptime": 3600,\n  "database": "connected",\n  "version": "1.0.0"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"database-health",children:"Database Health"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Connection status\nSELECT count(*) FROM pg_stat_activity;\n\n-- Database size\nSELECT pg_size_pretty(pg_database_size('hivepal'));\n\n-- Table statistics\nSELECT schemaname,tablename,n_tup_ins,n_tup_upd,n_tup_del \nFROM pg_stat_user_tables;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,s.jsx)(n.h3,{id:"application-logs",children:"Application Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "timestamp": "2024-01-01T00:00:00Z",\n  "level": "info",\n  "message": "User login successful",\n  "userId": "123",\n  "ip": "192.168.1.100",\n  "userAgent": "Mozilla/5.0..."\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"log-aggregation",children:"Log Aggregation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Using journalctl\njournalctl -u hive-pal -f\n\n# Using Docker\ndocker-compose logs -f backend\n\n# Custom log parser\ntail -f /var/log/hive-pal/app.log | jq '.'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"metrics-collection",children:"Metrics Collection"}),"\n",(0,s.jsx)(n.h3,{id:"prometheus-integration",children:"Prometheus Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# prometheus.yml\nscrape_configs:\n  - job_name: 'hive-pal'\n    static_configs:\n      - targets: ['localhost:3000']\n    metrics_path: /metrics\n    scrape_interval: 15s\n"})}),"\n",(0,s.jsx)(n.h3,{id:"key-metrics",children:"Key Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Request count and duration"}),"\n",(0,s.jsx)(n.li,{children:"Database query performance"}),"\n",(0,s.jsx)(n.li,{children:"Memory and CPU usage"}),"\n",(0,s.jsx)(n.li,{children:"Error rates"}),"\n",(0,s.jsx)(n.li,{children:"User session duration"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"grafana-dashboards",children:"Grafana Dashboards"}),"\n",(0,s.jsx)(n.h3,{id:"system-metrics",children:"System Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"CPU usage"}),"\n",(0,s.jsx)(n.li,{children:"Memory consumption"}),"\n",(0,s.jsx)(n.li,{children:"Disk I/O"}),"\n",(0,s.jsx)(n.li,{children:"Network traffic"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"application-metrics",children:"Application Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API response times"}),"\n",(0,s.jsx)(n.li,{children:"Database connections"}),"\n",(0,s.jsx)(n.li,{children:"User activity"}),"\n",(0,s.jsx)(n.li,{children:"Error rates"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"business-metrics",children:"Business Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"User registrations"}),"\n",(0,s.jsx)(n.li,{children:"Inspection records"}),"\n",(0,s.jsx)(n.li,{children:"Data growth"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"alerting",children:"Alerting"}),"\n",(0,s.jsx)(n.h3,{id:"alert-rules",children:"Alert Rules"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# alerts.yml\ngroups:\n  - name: hive-pal\n    rules:\n      - alert: HighErrorRate\n        expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.1\n        for: 5m\n        labels:\n          severity: critical\n        annotations:\n          summary: High error rate detected\n\n      - alert: DatabaseConnections\n        expr: pg_stat_activity_count > 80\n        for: 2m\n        labels:\n          severity: warning\n'})}),"\n",(0,s.jsx)(n.h3,{id:"notification-channels",children:"Notification Channels"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Email alerts"}),"\n",(0,s.jsx)(n.li,{children:"Slack integration"}),"\n",(0,s.jsx)(n.li,{children:"Webhook notifications"}),"\n",(0,s.jsx)(n.li,{children:"SMS alerts (via services)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"log-management",children:"Log Management"}),"\n",(0,s.jsx)(n.h3,{id:"log-rotation",children:"Log Rotation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# logrotate configuration\n/var/log/hive-pal/*.log {\n    daily\n    missingok\n    rotate 30\n    compress\n    delaycompress\n    notifempty\n    create 0644 hive-pal hive-pal\n    postrotate\n        systemctl reload hive-pal\n    endscript\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"centralized-logging",children:"Centralized Logging"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# docker-compose with Loki\nservices:\n  loki:\n    image: grafana/loki:latest\n    ports:\n      - "3100:3100"\n    \n  promtail:\n    image: grafana/promtail:latest\n    volumes:\n      - /var/log:/var/log:ro\n      - ./promtail-config.yml:/etc/promtail/config.yml\n'})}),"\n",(0,s.jsx)(n.h2,{id:"performance-monitoring",children:"Performance Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"database-performance",children:"Database Performance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- Slow queries\nSELECT query, mean_time, calls\nFROM pg_stat_statements\nORDER BY mean_time DESC\nLIMIT 10;\n\n-- Index usage\nSELECT schemaname,tablename,attname,n_distinct,correlation\nFROM pg_stats\nWHERE tablename = 'inspections';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"application-performance",children:"Application Performance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Memory usage\nps aux | grep hive-pal\n\n# File descriptor usage\nlsof -p $(pgrep -f hive-pal) | wc -l\n\n# Network connections\nnetstat -an | grep :3000\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-monitoring",children:"Security Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"access-logs",children:"Access Logs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Failed login attempts"}),"\n",(0,s.jsx)(n.li,{children:"Suspicious IP addresses"}),"\n",(0,s.jsx)(n.li,{children:"Unusual access patterns"}),"\n",(0,s.jsx)(n.li,{children:"API abuse detection"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"security-alerts",children:"Security Alerts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Monitor failed logins\ntail -f /var/log/hive-pal/app.log | grep "login failed"\n\n# Check for brute force attempts\ngrep "authentication failed" /var/log/hive-pal/app.log | \\\n  awk \'{print $4}\' | sort | uniq -c | sort -nr\n'})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"High memory usage"}),"\n",(0,s.jsx)(n.li,{children:"Database connection limits"}),"\n",(0,s.jsx)(n.li,{children:"Disk space exhaustion"}),"\n",(0,s.jsx)(n.li,{children:"SSL certificate expiration"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debug-tools",children:"Debug Tools"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Process monitoring\nhtop\niotop\n\n# Network debugging\ntcpdump -i eth0 port 3000\n\n# Database debugging\npg_stat_activity\npg_locks\n"})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-best-practices",children:"Monitoring Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"metrics-strategy",children:"Metrics Strategy"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Monitor what matters"}),"\n",(0,s.jsx)(n.li,{children:"Set meaningful thresholds"}),"\n",(0,s.jsx)(n.li,{children:"Avoid alert fatigue"}),"\n",(0,s.jsx)(n.li,{children:"Regular review and tuning"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"log-management-1",children:"Log Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Structured logging"}),"\n",(0,s.jsx)(n.li,{children:"Appropriate log levels"}),"\n",(0,s.jsx)(n.li,{children:"Log retention policies"}),"\n",(0,s.jsx)(n.li,{children:"Security considerations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Regular performance reviews"}),"\n",(0,s.jsx)(n.li,{children:"Capacity planning"}),"\n",(0,s.jsx)(n.li,{children:"Bottleneck identification"}),"\n",(0,s.jsx)(n.li,{children:"Optimization implementation"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);