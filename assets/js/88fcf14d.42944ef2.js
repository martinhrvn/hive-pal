"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[409],{1400:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"self-hosting/configuration","title":"Configuration","description":"Complete reference for configuring your Hive-Pal installation.","source":"@site/docs/self-hosting/configuration.md","sourceDirName":"self-hosting","slug":"/self-hosting/configuration","permalink":"/docs/self-hosting/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/martinhrvn/hive-pal/tree/main/docs/docs/self-hosting/configuration.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Configuration"},"sidebar":"tutorialSidebar","previous":{"title":"Manual Installation","permalink":"/docs/self-hosting/manual-setup"},"next":{"title":"Backup & Restore","permalink":"/docs/self-hosting/backup-restore"}}');var l=i(7557),s=i(3939);const r={sidebar_position:4,title:"Configuration"},o="Configuration",t={},c=[{value:"Environment Variables",id:"environment-variables",level:2},{value:"Backend Configuration",id:"backend-configuration",level:3},{value:"Database",id:"database",level:4},{value:"Security",id:"security",level:4},{value:"Optional Services",id:"optional-services",level:4},{value:"Frontend Configuration",id:"frontend-configuration",level:3},{value:"API Connection",id:"api-connection",level:4},{value:"Optional Features",id:"optional-features",level:4},{value:"Database Configuration",id:"database-configuration",level:2},{value:"Connection Pool",id:"connection-pool",level:3},{value:"Performance Tuning",id:"performance-tuning",level:3},{value:"Security Settings",id:"security-settings",level:2},{value:"HTTPS Configuration",id:"https-configuration",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"File Storage",id:"file-storage",level:2},{value:"Local Storage",id:"local-storage",level:3},{value:"Cloud Storage (Optional)",id:"cloud-storage-optional",level:3},{value:"Logging",id:"logging",level:2},{value:"Log Levels",id:"log-levels",level:3},{value:"External Logging",id:"external-logging",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Metrics",id:"metrics",level:3},{value:"Email Configuration",id:"email-configuration",level:2},{value:"SMTP Settings",id:"smtp-settings",level:3},{value:"Email Templates",id:"email-templates",level:3},{value:"API Configuration",id:"api-configuration",level:2},{value:"Rate Limiting",id:"rate-limiting-1",level:3},{value:"Timeouts",id:"timeouts",level:3},{value:"Cache Configuration",id:"cache-configuration",level:2},{value:"Redis (Optional)",id:"redis-optional",level:3},{value:"Memory Cache",id:"memory-cache",level:3},{value:"Backup Configuration",id:"backup-configuration",level:2},{value:"Database Backups",id:"database-backups",level:3},{value:"File Backups",id:"file-backups",level:3},{value:"Development Settings",id:"development-settings",level:2},{value:"Debug Mode",id:"debug-mode",level:3},{value:"Hot Reload",id:"hot-reload",level:3},{value:"Production Optimizations",id:"production-optimizations",level:2},{value:"Performance",id:"performance",level:3},{value:"Security",id:"security-1",level:3},{value:"Configuration Validation",id:"configuration-validation",level:2},{value:"Required Variables",id:"required-variables",level:3},{value:"Optional Variables",id:"optional-variables",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"configuration",children:"Configuration"})}),"\n",(0,l.jsx)(n.p,{children:"Complete reference for configuring your Hive-Pal installation."}),"\n",(0,l.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,l.jsx)(n.h3,{id:"backend-configuration",children:"Backend Configuration"}),"\n",(0,l.jsx)(n.h4,{id:"database",children:"Database"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'DATABASE_URL="postgresql://user:password@host:port/database"\n'})}),"\n",(0,l.jsx)(n.h4,{id:"security",children:"Security"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"JWT_SECRET=your_secure_jwt_secret_here\nJWT_EXPIRES_IN=7d\nALLOWED_ORIGINS=http://localhost:5173,https://yourdomain.com\n"})}),"\n",(0,l.jsx)(n.h4,{id:"optional-services",children:"Optional Services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Email (SMTP)\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=your-email@gmail.com\nSMTP_PASS=your-app-password\n\n# Error Tracking\nSENTRY_DSN=your_sentry_dsn_here\n\n# File Storage\nUPLOAD_PATH=/uploads\nMAX_FILE_SIZE=10485760  # 10MB\n"})}),"\n",(0,l.jsx)(n.h3,{id:"frontend-configuration",children:"Frontend Configuration"}),"\n",(0,l.jsx)(n.h4,{id:"api-connection",children:"API Connection"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"VITE_API_URL=http://localhost:3000\nVITE_API_TIMEOUT=30000\n"})}),"\n",(0,l.jsx)(n.h4,{id:"optional-features",children:"Optional Features"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"VITE_SENTRY_DSN=your_sentry_dsn_here\nVITE_GOOGLE_MAPS_API_KEY=your_maps_api_key\nVITE_WEATHER_API_KEY=your_weather_api_key\n"})}),"\n",(0,l.jsx)(n.h2,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"connection-pool",children:"Connection Pool"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"DB_POOL_MIN=2\nDB_POOL_MAX=10\nDB_POOL_IDLE_TIMEOUT=10000\nDB_POOL_ACQUIRE_TIMEOUT=60000\n"})}),"\n",(0,l.jsx)(n.h3,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- postgresql.conf optimizations\nshared_buffers = 256MB\neffective_cache_size = 1GB\nwork_mem = 4MB\nmaintenance_work_mem = 64MB\ncheckpoint_completion_target = 0.9\nrandom_page_cost = 1.1\n"})}),"\n",(0,l.jsx)(n.h2,{id:"security-settings",children:"Security Settings"}),"\n",(0,l.jsx)(n.h3,{id:"https-configuration",children:"HTTPS Configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Force HTTPS\nFORCE_HTTPS=true\nHSTS_MAX_AGE=31536000\n\n# CORS Settings\nCORS_CREDENTIALS=true\nCORS_MAX_AGE=86400\n"})}),"\n",(0,l.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"RATE_LIMIT_WINDOW=900000  # 15 minutes\nRATE_LIMIT_MAX=100        # requests per window\n"})}),"\n",(0,l.jsx)(n.h2,{id:"file-storage",children:"File Storage"}),"\n",(0,l.jsx)(n.h3,{id:"local-storage",children:"Local Storage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"UPLOAD_PATH=/var/lib/hive-pal/uploads\nTEMP_PATH=/tmp/hive-pal\n"})}),"\n",(0,l.jsx)(n.h3,{id:"cloud-storage-optional",children:"Cloud Storage (Optional)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# AWS S3\nAWS_REGION=us-west-2\nAWS_BUCKET=hive-pal-uploads\nAWS_ACCESS_KEY_ID=your_key\nAWS_SECRET_ACCESS_KEY=your_secret\n\n# Alternative: MinIO\nMINIO_ENDPOINT=http://localhost:9000\nMINIO_ACCESS_KEY=your_key\nMINIO_SECRET_KEY=your_secret\n"})}),"\n",(0,l.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,l.jsx)(n.h3,{id:"log-levels",children:"Log Levels"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"LOG_LEVEL=info  # error, warn, info, debug\nLOG_FORMAT=json # json, simple\nLOG_FILE=/var/log/hive-pal/app.log\n"})}),"\n",(0,l.jsx)(n.h3,{id:"external-logging",children:"External Logging"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Loki\nLOKI_URL=http://localhost:3100\nLOKI_USERNAME=admin\nLOKI_PASSWORD=admin\n"})}),"\n",(0,l.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,l.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"HEALTH_CHECK_ENABLED=true\nHEALTH_CHECK_PATH=/health\n"})}),"\n",(0,l.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"PROMETHEUS_ENABLED=true\nPROMETHEUS_PORT=9090\nMETRICS_PATH=/metrics\n"})}),"\n",(0,l.jsx)(n.h2,{id:"email-configuration",children:"Email Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"smtp-settings",children:"SMTP Settings"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'MAIL_FROM=noreply@your-domain.com\nMAIL_FROM_NAME="Hive-Pal"\nMAIL_REPLY_TO=support@your-domain.com\n'})}),"\n",(0,l.jsx)(n.h3,{id:"email-templates",children:"Email Templates"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Welcome email"}),"\n",(0,l.jsx)(n.li,{children:"Password reset"}),"\n",(0,l.jsx)(n.li,{children:"Inspection reminders"}),"\n",(0,l.jsx)(n.li,{children:"System notifications"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"api-configuration",children:"API Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"rate-limiting-1",children:"Rate Limiting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"API_RATE_LIMIT=1000  # requests per hour\nAPI_BURST_LIMIT=50   # burst requests\n"})}),"\n",(0,l.jsx)(n.h3,{id:"timeouts",children:"Timeouts"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"API_TIMEOUT=30000     # 30 seconds\nDB_TIMEOUT=10000      # 10 seconds\nUPLOAD_TIMEOUT=300000 # 5 minutes\n"})}),"\n",(0,l.jsx)(n.h2,{id:"cache-configuration",children:"Cache Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"redis-optional",children:"Redis (Optional)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"REDIS_URL=redis://localhost:6379\nREDIS_TTL=3600        # 1 hour\nREDIS_KEY_PREFIX=hive-pal:\n"})}),"\n",(0,l.jsx)(n.h3,{id:"memory-cache",children:"Memory Cache"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"CACHE_MAX_SIZE=100    # MB\nCACHE_TTL=1800        # 30 minutes\n"})}),"\n",(0,l.jsx)(n.h2,{id:"backup-configuration",children:"Backup Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"database-backups",children:"Database Backups"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'BACKUP_ENABLED=true\nBACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM\nBACKUP_RETENTION=30          # Days\nBACKUP_PATH=/backups\n'})}),"\n",(0,l.jsx)(n.h3,{id:"file-backups",children:"File Backups"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'FILE_BACKUP_ENABLED=true\nFILE_BACKUP_SCHEDULE="0 3 * * *"\nFILE_BACKUP_COMPRESSION=true\n'})}),"\n",(0,l.jsx)(n.h2,{id:"development-settings",children:"Development Settings"}),"\n",(0,l.jsx)(n.h3,{id:"debug-mode",children:"Debug Mode"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"NODE_ENV=development\nDEBUG=true\nVERBOSE_LOGGING=true\n"})}),"\n",(0,l.jsx)(n.h3,{id:"hot-reload",children:"Hot Reload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"WATCH_MODE=true\nRELOAD_ON_CHANGE=true\n"})}),"\n",(0,l.jsx)(n.h2,{id:"production-optimizations",children:"Production Optimizations"}),"\n",(0,l.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"NODE_ENV=production\nCOMPRESSION_ENABLED=true\nGZIP_LEVEL=6\nSTATIC_CACHE_TTL=31536000  # 1 year\n"})}),"\n",(0,l.jsx)(n.h3,{id:"security-1",children:"Security"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"HELMET_ENABLED=true\nCSP_ENABLED=true\nSECURE_COOKIES=true\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration-validation",children:"Configuration Validation"}),"\n",(0,l.jsx)(n.h3,{id:"required-variables",children:"Required Variables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"DATABASE_URL"}),"\n",(0,l.jsx)(n.li,{children:"JWT_SECRET"}),"\n",(0,l.jsx)(n.li,{children:"ALLOWED_ORIGINS"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"optional-variables",children:"Optional Variables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"All other settings have defaults"}),"\n",(0,l.jsx)(n.li,{children:"Override as needed"}),"\n",(0,l.jsx)(n.li,{children:"Environment-specific files supported"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Use environment-specific .env files"}),"\n",(0,l.jsx)(n.li,{children:"Never commit secrets to version control"}),"\n",(0,l.jsx)(n.li,{children:"Use Docker secrets in production"}),"\n",(0,l.jsx)(n.li,{children:"Validate configuration on startup"}),"\n",(0,l.jsx)(n.li,{children:"Monitor configuration changes"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},3939:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var a=i(8225);const l={},s=a.createContext(l);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);